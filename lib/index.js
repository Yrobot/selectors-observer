function e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function t(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?e(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var s=["selectors","listener"],c={},l=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=n.selectors,u=void 0===l?[]:l,a=n.listener,f=void 0===a?function(){}:a,v=o(n,s);r(this,e),i(this,"_callback",function(e){var t=this;e.reverse().forEach((function(e){var r,n=null==e||null===(r=e.target)||void 0===r?void 0:r._observer_selector;n&&(t.viewingState[n]=!(null==e||!e.isIntersecting))})),this._triggerListener()}.bind(this)),this._init(),this.observer=new IntersectionObserver(this._callback,t(t({},c),v)),this.listen(f),u.length>0&&this.select(u)}var l,u,a;return l=e,(u=[{key:"_init",value:function(){this.viewingState={}}},{key:"select",value:function(e){var t=this;return this._init(),this.unselect(),this.selectors=e,e.forEach((function(e){var r=document.querySelector(e);r&&(r._observer_selector=e,t.observer.observe(r))})),this}},{key:"listen",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};if("Function"!==e.constructor.name)throw new Error("SelectorsObserver: listener should pass a function");this.listener=e}},{key:"_triggerListener",value:function(){var e=this,t=this.selectors.filter((function(t){return e.viewingState[t]}));this.listener(t[0])}},{key:"unselect",value:function(){var e=this;this.selectors&&this.selectors.forEach((function(t){var r=document.querySelector(t);r&&e.observer.unobserve(r)}))}},{key:"disconnect",value:function(){this.observer.disconnect()}}])&&n(l.prototype,u),a&&n(l,a),e}();export default l;
